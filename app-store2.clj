[:version 38]
[:updated 1318545471407]
[:configuration {:SITE {:interstate-delay "1000", :parameters {}, :instances {}, :states [], :stats-cache-len "0"}, :WEB {:interstate-delay "3000", :parameters {:port "22"}, :instances {:primaria {:param-map {:host "localhost", :port "22"}}}, :states [{:key :start, :conf-map {:opr "date-time-opr", :conf {:format "yyyy/MM/dd HH:mm:ss"}}, :flow {:x 14, :y 44, :connect [:ssh?]}} {:key :ssh?, :conf-map {:retry-count "3", :timeout "1000", :opr "socket-opr", :retry-delay "3000", :conf {:host :host, :port :port}}, :flow {:x 289, :y 42, :connect [:switch-bad ".*Exception.*" :switch-good]}} {:key :MAL, :conf-map {:retry-count "0", :timeout "10000", :opr "send-mail-opr", :retry-delay "0", :conf {:subject "Problemas con ssh", :to-vec ["fgerard@interware.com.mx"], :host "smtp.gmail.com", :ssl true, :port "465", :passwd "1qaz2wsx", :user "robot@interware.com.mx", :text-vec [:ssh?]}}, :flow {:x 287, :y 255, :connect [:context]}} {:key :switch-bad, :conf-map {:opr "switch-bad-opr", :conf {:minutes2wait "5"}}, :flow {:x 266, :y 191, :connect [:MAL "send" :context]}} {:key :switch-good, :conf-map {:opr "switch-good-opr", :conf {}}, :flow {:x 100, :y 87, :connect [:log-bien "send" :context]}} {:key :log-bien, :conf-map {:opr "log-opr", :conf {:text "Ya quedo jalando el servicio", :level :debug}}, :flow {:x 170, :y 149, :connect [:context]}} {:key :context, :conf-map {:opr "print-context-opr", :conf {:filter ".*"}}, :flow {:x 5, :y 255, :connect [:clojure]}} {:key :clojure, :conf-map {:opr "clojure-opr", :conf {:code "(fn [context] \n  (Thread/sleep 3000)\n  {:result (str \"La hora es:\" (System/currentTimeMillis)) \n   :otro (str \"20,000! tiene muchos digitos\" )\n   :host \"127.0.0.1\"})"}}, :flow {:x 8, :y 156, :connect [:start]}}], :stats-cache-len "10"}}]
