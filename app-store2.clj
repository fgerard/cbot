[:version 75]
[:updated 1319948477586]
[:configuration {:SITE {:interstate-delay "3000", :parameters {:url "http://google.com.mx"}, :states [{:flow {:y "110", :x "99", :connect [":pagina"]}, :key ":inicio", :conf-map {:opr "sleep-opr", :conf {:delta "3000"}}} {:flow {:y "108", :x "280", :connect [":bien" ".*<title>Google</title>.*" ":mal"]}, :key ":pagina", :conf-map {:retry-count "3", :timeout ":timeout", :opr "get-http-opr", :retry-delay "3000", :conf {:url ":url"}}} {:flow {:y "194", :x "195", :connect [":inicio"]}, :key ":bien", :conf-map {:opr "switch-good-opr"}} {:flow {:y "18", :x "188", :connect [":inicio"]}, :key ":mal", :conf-map {:opr "switch-bad-opr", :conf {:minutes2wait "5"}}}], :stats-cache-len "10", :instances {:lenta {:param-map {:timeout "3000"}}, :rapida {:param-map {:timeout "300"}}}}, :WEB {:interstate-delay "6000", :stats-cache-len "10", :instances {:primaria {:param-map {:port "22", :host "localhost"}}}, :parameters {:port "22", :start-delay "4000"}, :states [{:key ":start", :conf-map {:opr "sleep-opr", :conf {:delta ":start-delay"}}, :flow {:connect [":ssh?"], :x "19", :y "13"}} {:key ":ssh?", :flow {:connect [":switch-bad" ".*Exception.*" ":switch-good"], :x "400", :y "13"}, :conf-map {:retry-count "3", :opr "socket-opr", :conf {:port ":port", :host ":host"}, :retry-delay "3000", :timeout "1000"}} {:key ":MAL", :conf-map {:opr "human-opr"}, :flow {:x "402", :y "167"}} {:key ":switch-bad", :flow {:connect [":MAL" "send" ":context"], :x "394", :y "113"}, :conf-map {:opr "switch-bad-opr", :conf {:minutes2wait "5"}}} {:key ":switch-good", :conf-map {:opr "switch-good-opr"}, :flow {:connect [":log-bien" "send" ":context"], :x "304", :y "67"}} {:key ":log-bien", :flow {:connect [":context"], :x "149", :y "66"}, :conf-map {:opr "log-opr", :conf {:level ":debug", :text "Ya quedo jalando el servicio"}}} {:key ":context", :conf-map {:opr "print-context-opr", :conf {:filter ".*"}}, :flow {:connect [":clojure"], :x "149", :y "115"}} {:key ":clojure", :conf-map {:conf {:code "(fn [context] \n  (Thread/sleep 3000)\n  {:result (str \"La hora es:\" (System/currentTimeMillis)) \n   :otro (str \"20,000! tiene muchos digitos\" )\n   :host \"127.0.0.1\"})"}, :opr "clojure-opr"}, :flow {:connect [":start"], :x "16", :y "70"}} {:key ":comando", :conf-map {:opr "sleep-opr", :conf {:delta "3000"}}, :flow {:x "155", :y "166", :connect [":ojo-google"]}} {:key ":ojo-google", :conf-map {:opr "get-http-opr", :retry-delay "3000", :timeout "900", :retry-count "2", :conf {:url "http://google.com"}}, :flow {:x "21", :y "165", :connect [":context" ".*<title>Google.*" ":comando"]}} {:key "prueba", :conf-map {:opr "clojure-opr"}, :flow {:x "27", :y "247"}} {:key "switch-good", :conf-map {:opr "clojure-opr"}, :flow {:x "23", :y "289"}}]}}]
