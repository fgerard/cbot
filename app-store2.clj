[:version 77]
[:updated 1320278397254]
[:configuration {:SITE {:interstate-delay "3000", :stats-cache-len "10", :instances {:lenta {:param-map {:timeout "3000"}}, :rapida {:param-map {:timeout "300"}}}, :parameters {:url "http://google.com.mx"}, :states [{:key ":inicio", :conf-map {:opr "sleep-opr", :conf {:delta "3000"}}, :flow {:connect [":pagina"], :x "99", :y "110"}} {:key ":pagina", :flow {:connect [":espera" ".*Exception.*" ":bien" ".*<title>Google</title>.*" ":mal"], :x "280", :y "108"}, :conf-map {:retry-count "3", :conf {:url ":url"}, :opr "get-http-opr", :retry-delay "3000", :timeout ":timeout"}} {:key ":bien", :conf-map {:opr "switch-good-opr"}, :flow {:connect [":inicio"], :x "195", :y "194"}} {:key ":mal", :flow {:connect [":inicio"], :x "188", :y "18"}, :conf-map {:opr "switch-bad-opr", :conf {:minutes2wait "5"}}} {:key ":espera", :conf-map {:opr "sleep-opr", :conf {:delta "9000"}}, :flow {:connect [":ssh" ".*" ":bien"], :x "471", :y "135"}} {:key ":ssh", :flow {:connect [":bien"], :x "397", :y "242"}, :conf-map {:opr "socket-opr", :retry-delay "5000", :timeout "500", :conf {:port "22", :host "localhost"}, :retry-count "5"}}]}, :WEB {:interstate-delay "6000", :parameters {:start-delay "4000", :port "22"}, :states [{:flow {:y "13", :x "19", :connect [":ssh?"]}, :key ":start", :conf-map {:opr "sleep-opr", :conf {:delta ":start-delay"}}} {:flow {:y "13", :x "400", :connect [":switch-bad" ".*Exception.*" ":switch-good"]}, :key ":ssh?", :conf-map {:retry-count "3", :timeout "1000", :opr "socket-opr", :retry-delay "3000", :conf {:host ":host", :port ":port"}}} {:flow {:y "167", :x "402"}, :key ":MAL", :conf-map {:opr "human-opr"}} {:flow {:y "113", :x "394", :connect [":MAL" "send" ":context"]}, :key ":switch-bad", :conf-map {:opr "switch-bad-opr", :conf {:minutes2wait "5"}}} {:flow {:y "67", :x "304", :connect [":log-bien" "send" ":context"]}, :key ":switch-good", :conf-map {:opr "switch-good-opr"}} {:flow {:y "66", :x "149", :connect [":context"]}, :key ":log-bien", :conf-map {:opr "log-opr", :conf {:text "Ya quedo jalando el servicio", :level ":debug"}}} {:flow {:y "115", :x "149", :connect [":clojure"]}, :key ":context", :conf-map {:opr "print-context-opr", :conf {:filter ".*"}}} {:flow {:y "70", :x "16", :connect [":start"]}, :key ":clojure", :conf-map {:opr "clojure-opr", :conf {:code "(fn [context] \n  (Thread/sleep 3000)\n  {:result (str \"La hora es:\" (System/currentTimeMillis)) \n   :otro (str \"20,000! tiene muchos digitos\" )\n   :host \"127.0.0.1\"})"}}} {:flow {:y "166", :x "155", :connect [":ojo-google"]}, :key ":comando", :conf-map {:opr "sleep-opr", :conf {:delta "3000"}}} {:flow {:y "165", :x "21", :connect [":context" ".*<title>Google.*" ":comando"]}, :key ":ojo-google", :conf-map {:retry-count "2", :timeout "900", :opr "get-http-opr", :retry-delay "3000", :conf {:url "http://google.com"}}} {:flow {:y "247", :x "27"}, :key "prueba", :conf-map {:opr "clojure-opr"}} {:flow {:y "289", :x "23"}, :key "switch-good", :conf-map {:opr "clojure-opr"}}], :stats-cache-len "10", :instances {:primaria {:param-map {:host "localhost", :port "22"}}}}}]
